#{extends 'main.html' /}
<style type="text/css">
footer, #copyright{display: none;}
</style>
<div id="kanban">
    <div id="board">
        <div id="space"><canvas id="mycanvas"></canvas></div>
        <div id="board_control" >
        	<ul>
        	<li id="post_stack_yellow" class="icon-edit"><span>yellow post</span></li>
            <li id="post_stack_pink" class="icon-edit"><span>pink post</span></li>
        	<li id="black_pen" class="icon-pencil"><span>pen</span></li>
        	<li id="eraser" class="icon-check-empty"><span>eraser</span></li>
            <li id="globalmove" class="icon-move"><span>move</span></li>
            <li id="trashcan" class="icon-trash"></li>
        	</ul>
        </div>
    </div>
</div>



<script type="text/javascript">

    window.addEvent('domready', function()
    {
    	#{if offline}KanbanApp.offline=true;#{/if}
        var kanban = new Kanban('space','${kanban.id}',{board:'board', width: ${kanban.board.width}, height: ${kanban.board.height}});
        kanban.load();
        kanban.addStack('post_stack_yellow','#fefabc');
        kanban.addStack('post_stack_pink','pink');
        kanban.addPen('black_pen');
		kanban.addEraser('eraser');
        kanban.addMover('globalmove');

        resizeKanban();
        window.addEvent('resize', resizeKanban);

    });

    function resizeKanban()
    {
        //console.log($(document.body).getStyle('height'));
        var reheight = $(document.body).getStyle('height').toInt()-60;
        $('kanban').setStyle('height', reheight+'px');

        console.log($('board_control').getPosition());
        if($('board_control').getPosition().y > ${kanban.board.height}-30)
            $('board_control').setPosition({y: ${kanban.board.height}-30});
    }

</script>